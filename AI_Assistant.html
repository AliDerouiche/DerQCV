<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DerQCV AI Assistant - Derouiche Quantum Crypto Visualizer</title>
  <link rel="icon" type="image/x-icon" href="logob.ico">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-cpp.min.js"></script>
<style>
  :root {
    --primary-color: #0A192F;
    --secondary-color: #112240;
    --tertiary-color: #192E54;
    --accent-color: #64FFDA;
    --hover-color: #52d8c0;
    --text-color: #CCD6F6;
    --card-bg: rgba(17, 34, 64, 0.85);
    --border-color: #203A5B;
    --success-color: #4CAF50;
    --error-color: #F44336;
    --warning-color: #FF9800;
    --ai-color: #7B68EE;
    --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    --hover-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
    --code-bg: #2d2d2d;
    --code-border: #3e3e3e;
  }
  
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  body {
    background: linear-gradient(135deg, #0A192F 0%, #112240 50%, #1E3A8A 100%);
    background-attachment: fixed;
    color: var(--text-color);
    font-family: 'Poppins', sans-serif;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    overflow-x: hidden;
    position: relative;
  }
  
  /* Animated background particles */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
      radial-gradient(circle at 20% 30%, rgba(123, 104, 238, 0.1) 0%, transparent 20%),
      radial-gradient(circle at 80% 70%, rgba(100, 255, 218, 0.1) 0%, transparent 20%);
    z-index: -1;
  }
  
  /* Header */
  header {
    padding: 0.2rem 2rem;
    background: rgba(17, 34, 64, 0.9);
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: sticky;
    top: 0;
    z-index: 1000;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    border-bottom: 1px solid rgba(100, 255, 218, 0.1);
  }
  
  .logo {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .logo-icon {
    width: 40px;
    height: 40px;
    background: linear-gradient(45deg, var(--accent-color), var(--hover-color));
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-color);
    font-size: 1.5rem;
    box-shadow: 0 4px 10px rgba(100, 255, 218, 0.3);
    transition: transform 0.3s ease;
  }
  
  .logo:hover .logo-icon {
    transform: rotate(15deg) scale(1.1);
  }
  
  .logo-text {
    font-size: 1.5rem;
    font-weight: 600;
    background: linear-gradient(45deg, var(--accent-color), var(--hover-color));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  
  nav {
    display: flex;
    gap: 1.5rem;
  }
  
  nav a {
    color: var(--text-color);
    text-decoration: none;
    font-weight: 500;
    padding: 0.5rem 0;
    position: relative;
    transition: color 0.3s ease;
  }
  
  nav a::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--accent-color);
    transition: width 0.3s ease;
  }
  
  nav a:hover {
    color: var(--accent-color);
  }
  
  nav a:hover::after {
    width: 100%;
  }
  
  nav a.active {
    color: var(--accent-color);
  }
  
  nav a.active::after {
    width: 100%;
  }
  
  /* Main Content */
  main {
    flex: 1;
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem;
    width: 100%;
  }
  
  .page-header {
    text-align: center;
    margin-bottom: 2.5rem;
  }
  
  h1 {
    font-size: 2.8rem;
    margin-bottom: 0.5rem;
    background: linear-gradient(45deg, var(--ai-color), var(--accent-color));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 2px 10px rgba(123, 104, 238, 0.2);
  }
  
  .subtitle {
    font-size: 1.3rem;
    color: var(--accent-color);
    font-weight: 400;
  }
  
  .ai-intro {
    background: var(--card-bg);
    border-radius: 15px;
    padding: 2.5rem;
    margin-bottom: 2.5rem;
    border: 1px solid rgba(100, 255, 218, 0.2);
    box-shadow: var(--card-shadow);
    text-align: center;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  
  .ai-intro:hover {
    transform: translateY(-5px);
    box-shadow: var(--hover-shadow);
  }
  
  .ai-intro h2 {
    color: var(--ai-color);
    margin-bottom: 1.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    font-size: 1.8rem;
  }
  
  .ai-intro p {
    line-height: 1.7;
    margin-bottom: 1rem;
    font-size: 1.1rem;
  }
  
  .ai-features {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    margin: 2.5rem 0;
  }
  
  .ai-feature {
    background: var(--card-bg);
    border-radius: 15px;
    padding: 2rem;
    border: 1px solid rgba(100, 255, 218, 0.1);
    transition: all 0.4s ease;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    box-shadow: var(--card-shadow);
    position: relative;
    overflow: hidden;
  }
  
  .ai-feature::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(90deg, var(--ai-color), var(--accent-color));
    transform: translateX(-100%);
    transition: transform 0.5s ease;
  }
  
  .ai-feature:hover::before {
    transform: translateX(0);
  }
  
  .ai-feature:hover {
    transform: translateY(-8px);
    box-shadow: var(--hover-shadow);
    border-color: var(--ai-color);
  }
  
  .ai-feature-icon {
    font-size: 2.5rem;
    color: var(--ai-color);
    margin-bottom: 1.2rem;
    text-align: center;
    transition: transform 0.3s ease;
  }
  
  .ai-feature:hover .ai-feature-icon {
    transform: scale(1.2);
  }
  
  .ai-feature-title {
    font-weight: 600;
    color: var(--accent-color);
    margin-bottom: 0.8rem;
    text-align: center;
    font-size: 1.2rem;
  }
  
  .ai-feature-desc {
    font-size: 1rem;
    color: #8892B0;
    text-align: center;
    line-height: 1.6;
  }
  
  .chat-container {
    display: grid;
    grid-template-columns: 1fr 3fr;
    gap: 2.5rem;
    margin-bottom: 2.5rem;
    position: relative;
  }
  
  .chat-container.expanded {
    grid-template-columns: 1fr 4fr;
  }
  
  .chat-container.fullscreen {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(10, 25, 47, 0.98);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    z-index: 10000;
    padding: 2rem;
    grid-template-columns: 1fr 4fr;
    gap: 3rem;
  }
  
  @media (max-width: 1024px) {
    .chat-container {
      grid-template-columns: 1fr;
    }
    
    .chat-container.expanded {
      grid-template-columns: 1fr;
    }
    
    .chat-container.fullscreen {
      grid-template-columns: 1fr;
      padding: 1rem;
    }
  }
  
  .chat-sidebar {
    background: var(--card-bg);
    border-radius: 15px;
    padding: 2rem;
    border: 1px solid rgba(100, 255, 218, 0.2);
    box-shadow: var(--card-shadow);
    height: fit-content;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }
  
  .chat-sidebar h3 {
    color: var(--ai-color);
    margin-bottom: 1.8rem;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.4rem;
  }
  
  .suggested-questions {
    list-style: none;
  }
  
  .suggested-questions li {
    margin-bottom: 1.2rem;
    padding: 1rem;
    background: rgba(123, 104, 238, 0.1);
    border-radius: 10px;
    border-left: 3px solid var(--ai-color);
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.95rem;
    line-height: 1.5;
  }
  
  .suggested-questions li:hover {
    background: rgba(123, 104, 238, 0.2);
    transform: translateX(8px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  }
  
  .suggested-questions li.active {
    background: rgba(100, 255, 218, 0.2);
    border-left-color: var(--accent-color);
    box-shadow: 0 5px 15px rgba(100, 255, 218, 0.2);
  }
  
  .chat-main {
    background: var(--card-bg);
    border-radius: 15px;
    padding: 2rem;
    border: 1px solid rgba(100, 255, 218, 0.2);
    box-shadow: var(--card-shadow);
    display: flex;
    flex-direction: column;
    height: 600px;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    position: relative;
  }
  
  .chat-container.expanded .chat-main {
    height: 700px;
  }
  
  .chat-container.fullscreen .chat-main {
    height: calc(100vh - 4rem);
  }
  
  .chat-controls {
    position: absolute;
    top: 1rem;
    right: 1rem;
    display: flex;
    gap: 0.5rem;
    z-index: 100;
  }
  
  .chat-control-btn {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: rgba(123, 104, 238, 0.2);
    border: 1px solid rgba(123, 104, 238, 0.3);
    color: var(--ai-color);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.9rem;
  }
  
  .chat-control-btn:hover {
    background: rgba(123, 104, 238, 0.4);
    transform: scale(1.1);
  }
  
  .chat-control-btn.active {
    background: var(--ai-color);
    color: white;
  }
  
  .chat-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 1.2rem;
    padding-bottom: 1.2rem;
    border-bottom: 1px solid rgba(100, 255, 218, 0.2);
  }
  
  .chat-header-icon {
    width: 45px;
    height: 45px;
    background: linear-gradient(45deg, var(--ai-color), var(--accent-color));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.3rem;
    box-shadow: 0 4px 10px rgba(123, 104, 238, 0.3);
  }
  
  .chat-header-title {
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--ai-color);
  }
  
  .chat-status {
    margin-left: auto;
    font-size: 0.85rem;
    color: #8892B0;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  
  .status-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--success-color);
    box-shadow: 0 0 5px rgba(76, 175, 80, 0.5);
    animation: pulse 2s infinite;
  }
  
  @keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.4); }
    70% { box-shadow: 0 0 0 6px rgba(76, 175, 80, 0); }
    100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0); }
  }
  
  .chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 0.8rem;
    margin-bottom: 1.2rem;
    scrollbar-width: thin;
    scrollbar-color: var(--ai-color) var(--tertiary-color);
  }
  
  .chat-messages::-webkit-scrollbar {
    width: 6px;
  }
  
  .chat-messages::-webkit-scrollbar-track {
    background: var(--tertiary-color);
    border-radius: 3px;
  }
  
  .chat-messages::-webkit-scrollbar-thumb {
    background: var(--ai-color);
    border-radius: 3px;
  }
  
  .message {
    margin-bottom: 1.5rem;
    display: flex;
    gap: 1rem;
    animation: fadeIn 0.4s ease;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .message-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.1rem;
    flex-shrink: 0;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
  }
  
  .user-avatar {
    background: linear-gradient(45deg, var(--accent-color), var(--hover-color));
    color: var(--primary-color);
  }
  
  .ai-avatar {
    background: linear-gradient(45deg, var(--ai-color), var(--accent-color));
    color: white;
  }
  
  .message-content {
    flex: 1;
  }
  
  .message-bubble {
    padding: 1.2rem;
    border-radius: 18px;
    max-width: 85%;
    position: relative;
    font-size: 0.95rem;
    line-height: 1.6;
  }
  
  .user-message .message-bubble {
    background: linear-gradient(45deg, var(--accent-color), var(--hover-color));
    color: var(--primary-color);
    border-top-right-radius: 0;
    box-shadow: 0 4px 12px rgba(100, 255, 218, 0.2);
  }
  
  .ai-message .message-bubble {
    background: var(--tertiary-color);
    color: var(--text-color);
    border-top-left-radius: 0;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    max-width: 95%;
  }
  
  .message-time {
    font-size: 0.75rem;
    color: #8892B0;
    margin-top: 0.4rem;
  }
  
  .user-message .message-time {
    text-align: right;
  }
  
  .typing-indicator {
    display: flex;
    gap: 5px;
    padding: 1.2rem;
    align-items: center;
  }
  
  .typing-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--ai-color);
    animation: typing 1.4s infinite;
  }
  
  .typing-dot:nth-child(2) {
    animation-delay: 0.2s;
  }
  
  .typing-dot:nth-child(3) {
    animation-delay: 0.4s;
  }
  
  @keyframes typing {
    0%, 60%, 100% {
      transform: translateY(0);
      opacity: 0.7;
    }
    30% {
      transform: translateY(-10px);
      opacity: 1;
    }
  }
  
  .chat-input-container {
    display: flex;
    gap: 1.2rem;
    align-items: flex-end;
  }
  
  .chat-input {
    flex: 1;
    padding: 1.2rem;
    background: var(--tertiary-color);
    border: 1px solid var(--border-color);
    border-radius: 20px;
    color: var(--text-color);
    font-family: 'Poppins', sans-serif;
    font-size: 1rem;
    resize: none;
    outline: none;
    transition: all 0.3s ease;
    box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
    min-height: 50px;
    max-height: 150px;
  }
  
  .chat-input:focus {
    border-color: var(--accent-color);
    box-shadow: 0 0 0 3px rgba(100, 255, 218, 0.2), inset 0 2px 5px rgba(0, 0, 0, 0.2);
  }
  
  .send-button {
    width: 55px;
    height: 55px;
    border-radius: 50%;
    background: linear-gradient(45deg, var(--ai-color), var(--accent-color));
    border: none;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    flex-shrink: 0;
    box-shadow: 0 4px 12px rgba(123, 104, 238, 0.3);
  }
  
  .send-button:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 15px rgba(123, 104, 238, 0.4);
  }
  
  .send-button:active {
    transform: scale(0.95);
  }
  
  .send-button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
  }
  
  /* Enhanced Message Styles */
  .ai-message .message-bubble h3,
  .ai-message .message-bubble h4 {
    color: var(--accent-color);
    margin: 1rem 0 0.5rem 0;
    font-weight: 600;
  }
  
  .ai-message .message-bubble h3 {
    font-size: 1.2rem;
    border-bottom: 1px solid rgba(100, 255, 218, 0.3);
    padding-bottom: 0.5rem;
  }
  
  .ai-message .message-bubble h4 {
    font-size: 1.1rem;
  }
  
  .ai-message .message-bubble ul,
  .ai-message .message-bubble ol {
    margin: 0.8rem 0;
    padding-left: 1.5rem;
  }
  
  .ai-message .message-bubble li {
    margin-bottom: 0.4rem;
    line-height: 1.6;
  }
  
  .ai-message .message-bubble blockquote {
    border-left: 4px solid var(--ai-color);
    padding-left: 1rem;
    margin: 1rem 0;
    background: rgba(123, 104, 238, 0.1);
    border-radius: 0 8px 8px 0;
    padding: 1rem;
    font-style: italic;
  }
  
  .message-actions {
    display: flex;
    gap: 0.5rem;
    margin-top: 0.8rem;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .message:hover .message-actions {
    opacity: 1;
  }
  
  .message-action-btn {
    background: rgba(123, 104, 238, 0.2);
    border: none;
    color: var(--ai-color);
    padding: 0.3rem 0.6rem;
    border-radius: 15px;
    font-size: 0.8rem;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  
  .message-action-btn:hover {
    background: rgba(123, 104, 238, 0.4);
    transform: scale(1.05);
  }
  
  /* Code Block Styles */
  .code-block-container {
    margin: 1rem 0;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    border: 1px solid var(--code-border);
    background: var(--code-bg);
  }
  
  .code-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: linear-gradient(135deg, #2d2d2d, #3a3a3a);
    padding: 0.8rem 1rem;
    border-bottom: 1px solid var(--code-border);
  }
  
  .code-language {
    color: var(--accent-color);
    font-size: 0.85rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  .code-actions {
    display: flex;
    gap: 0.5rem;
  }
  
  .copy-button,
  .run-button {
    background: rgba(100, 255, 218, 0.2);
    border: none;
    color: var(--accent-color);
    padding: 0.4rem 0.8rem;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.8rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: all 0.2s ease;
  }
  
  .copy-button:hover,
  .run-button:hover {
    background: rgba(100, 255, 218, 0.3);
    transform: translateY(-1px);
  }
  
  .copy-button.copied {
    background: rgba(76, 175, 80, 0.3);
    color: var(--success-color);
  }
  
  .run-button {
    background: rgba(255, 152, 0, 0.2);
    color: var(--warning-color);
  }
  
  .run-button:hover {
    background: rgba(255, 152, 0, 0.3);
  }
  
  pre[class*="language-"] {
    margin: 0;
    padding: 1.2rem;
    background: var(--code-bg);
    font-size: 0.9rem;
    line-height: 1.6;
    overflow-x: auto;
    font-family: 'Fira Code', 'Consolas', monospace;
  }
  
  /* Code Output */
  .code-output {
    background: #1a1a1a;
    border-top: 1px solid var(--code-border);
    padding: 1rem;
    font-family: 'Fira Code', 'Consolas', monospace;
    font-size: 0.85rem;
    line-height: 1.5;
    color: #00ff00;
    max-height: 200px;
    overflow-y: auto;
  }
  
  .code-output.error {
    color: var(--error-color);
  }
  
  /* Algorithm Explanation */
  .algorithm-explanation {
    background: rgba(123, 104, 238, 0.1);
    border: 1px solid rgba(123, 104, 238, 0.3);
    border-radius: 12px;
    padding: 1.5rem;
    margin: 1rem 0;
  }
  
  .algorithm-title {
    color: var(--ai-color);
    font-size: 1.3rem;
    font-weight: 600;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  .algorithm-steps {
    margin: 1rem 0;
  }
  
  .algorithm-step {
    background: rgba(100, 255, 218, 0.1);
    border-left: 4px solid var(--accent-color);
    padding: 1rem;
    margin-bottom: 0.8rem;
    border-radius: 0 8px 8px 0;
  }
  
  .step-number {
    background: var(--accent-color);
    color: var(--primary-color);
    width: 25px;
    height: 25px;
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 0.9rem;
    margin-right: 0.8rem;
  }
  
  .complexity-info {
    background: rgba(255, 152, 0, 0.1);
    border: 1px solid rgba(255, 152, 0, 0.3);
    border-radius: 8px;
    padding: 1rem;
    margin: 1rem 0;
  }
  
  .complexity-title {
    color: var(--warning-color);
    font-weight: 600;
    margin-bottom: 0.5rem;
  }
  
  /* Mathematical Formula */
  .math-formula {
    background: rgba(10, 25, 47, 0.6);
    border: 1px solid rgba(100, 255, 218, 0.2);
    border-radius: 8px;
    padding: 1rem;
    margin: 1rem 0;
    font-family: 'Times New Roman', serif;
    text-align: center;
    font-size: 1.1rem;
  }
  
  /* Security Warning */
  .security-warning {
    background: rgba(244, 67, 54, 0.1);
    border: 1px solid rgba(244, 67, 54, 0.3);
    border-radius: 8px;
    padding: 1rem;
    margin: 1rem 0;
    border-left: 4px solid var(--error-color);
  }
  
  .security-warning-title {
    color: var(--error-color);
    font-weight: 600;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  /* Project Info */
  .project-info {
    background: var(--card-bg);
    border-radius: 15px;
    padding: 2.5rem;
    margin-top: 2.5rem;
    border: 1px solid rgba(100, 255, 218, 0.2);
    box-shadow: var(--card-shadow);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }
  
  .project-info h3 {
    color: var(--accent-color);
    margin-bottom: 1.8rem;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.6rem;
  }
  
  .project-info p {
    line-height: 1.7;
    margin-bottom: 1.2rem;
    font-size: 1.1rem;
  }
  
  .project-modes {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
  }
  
  .project-mode {
    background: rgba(10, 25, 47, 0.6);
    border-radius: 12px;
    padding: 2rem;
    border: 1px solid rgba(100, 255, 218, 0.1);
    transition: all 0.4s ease;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    box-shadow: var(--card-shadow);
    position: relative;
    overflow: hidden;
  }
  
  .project-mode::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(90deg, var(--ai-color), var(--accent-color));
    transform: translateX(-100%);
    transition: transform 0.5s ease;
  }
  
  .project-mode:hover::before {
    transform: translateX(0);
  }
  
  .project-mode:hover {
    transform: translateY(-8px);
    box-shadow: var(--hover-shadow);
    border-color: var(--accent-color);
  }
  
  .project-mode h4 {
    color: var(--accent-color);
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.3rem;
  }
  
  .project-mode p {
    font-size: 1rem;
    color: #8892B0;
    line-height: 1.6;
  }
  
  .project-mode-link {
    display: inline-block;
    margin-top: 1.2rem;
    color: var(--accent-color);
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s ease;
    position: relative;
  }
  
  .project-mode-link::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--accent-color);
    transition: width 0.3s ease;
  }
  
  .project-mode-link:hover {
    color: var(--hover-color);
  }
  
  .project-mode-link:hover::after {
    width: 100%;
  }
  
  /* Footer */
  footer {
    background: var(--secondary-color);
    padding: 2.5rem;
    text-align: center;
    margin-top: auto;
    border-top: 1px solid rgba(100, 255, 218, 0.1);
  }
  
  .footer-content {
    max-width: 1000px;
    margin: 0 auto;
  }
  
  .footer-links {
    display: flex;
    justify-content: center;
    gap: 2rem;
    margin-bottom: 1.5rem;
    flex-wrap: wrap;
  }
  
  .footer-links a {
    color: var(--text-color);
    text-decoration: none;
    transition: color 0.3s ease;
    font-weight: 500;
  }
  
  .footer-links a:hover {
    color: var(--accent-color);
  }
  
  /* Notification */
  .notification {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background: var(--card-bg);
    color: var(--text-color);
    padding: 18px 28px;
    border-radius: 12px;
    box-shadow: var(--hover-shadow);
    z-index: 1000;
    transform: translateY(100px);
    opacity: 0;
    transition: all 0.4s ease;
    border-left: 5px solid var(--accent-color);
    max-width: 320px;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }
  
  .notification.show {
    transform: translateY(0);
    opacity: 1;
  }
  
  .notification.error {
    border-left-color: var(--error-color);
  }
  
  .notification.success {
    border-left-color: var(--success-color);
  }
  
  /* Responsive */
  @media (max-width: 768px) {
    header {
      flex-direction: column;
      gap: 1.2rem;
      padding: 1.2rem;
    }
    
    nav {
      flex-wrap: wrap;
      justify-content: center;
      gap: 1rem;
    }
    
    h1 {
      font-size: 2.4rem;
    }
    
    main {
      padding: 1.2rem;
    }
    
    .ai-features {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }
    
    .project-modes {
      grid-template-columns: 1fr;
    }
    
    .chat-main {
      height: 500px;
    }
    
    .chat-container.expanded .chat-main {
      height: 600px;
    }
    
    .chat-sidebar {
      display: none;
    }
    
    .chat-container.fullscreen .chat-sidebar {
      display: block;
    }
    
    .notification {
      right: 20px;
      bottom: 20px;
      max-width: calc(100% - 40px);
    }
    
    .chat-controls {
      position: relative;
      top: auto;
      right: auto;
      margin-bottom: 1rem;
      justify-content: flex-end;
    }
  }
    .logo img {
  height: 69px; /* Taille du logo */
  width: auto; /* Garde les proportions */
  display: block;
  }
</style>
</head>
<body>
<header>
  <div class="logo">
    <img src="logo.png" alt="Site Logo">
    <div class="logo-text">DerQCV</div>
  </div>
  <nav>
    <a href="https://aliderouiche.github.io/DerQCV/Home.html">Home</a>
    <a href="https://aliderouiche.github.io/DerQCV/Mathematical_Mode.html">Mathematical Mode</a>
    <a href="https://aliderouiche.github.io/DerQCV/Quantum_Mode.html">Quantum Mode</a>
    <a href="https://aliderouiche.github.io/DerQCV/Comparison.html">Comparison</a>
    <a href="https://aliderouiche.github.io/DerQCV/AI_Assistant.html" class="active">AI Assistant</a>
    <a href="https://aliderouiche.github.io/DerQCV/About.html">About</a>
 
  </nav>
</header>
<main>
  <div class="page-header">
    <h1>DerQCV AI Assistant</h1>
    <p class="subtitle">Your Cryptography & Quantum Computing Expert</p>
  </div>
  
  <div class="ai-intro">
    <h2><i class="fas fa-robot"></i> Meet Your AI Assistant</h2>
    <p>
      Welcome to DerQCV AI Assistant, powered by DeepSeek. This intelligent assistant is designed to help you navigate the complex world of cryptography and quantum computing. Whether you're a student, researcher, or professional, our AI can provide explanations, answer questions, and guide you through the various features of our platform.
    </p>
  </div>
  
 
  
  <div class="chat-container" id="chatContainer">
    <div class="chat-sidebar">
      <h3><i class="fas fa-question-circle"></i> Suggested Questions</h3>
      <ul class="suggested-questions">
        <li>What is the difference between RSA and quantum cryptography?</li>
        <li>How does the BB84 protocol ensure secure communication?</li>
        <li>Explain the mathematical foundation of AES encryption</li>
        <li>What are the current challenges in quantum computing?</li>
        <li>What is post-quantum cryptography?</li>
        <li>Show me a Python example of RSA encryption</li>
      </ul>
    </div>
    
    <div class="chat-main">
      <div class="chat-controls">
        <div class="chat-control-btn" id="expandBtn" title="Expand Chat">
          <i class="fas fa-expand-arrows-alt"></i>
        </div>
        <div class="chat-control-btn" id="fullscreenBtn" title="Fullscreen Mode">
          <i class="fas fa-expand"></i>
        </div>
        <div class="chat-control-btn" id="clearBtn" title="Clear Chat">
          <i class="fas fa-trash"></i>
        </div>
      </div>
      
      <div class="chat-header">
        <div class="chat-header-icon">
          <i class="fas fa-robot"></i>
        </div>
        <div class="chat-header-title">DerQCV AI Assistant</div>
        <div class="chat-status">
          <div class="status-dot"></div>
          <span>Online</span>
        </div>
      </div>
      
      <div class="chat-messages" id="chatMessages">
        <div class="message ai-message">
          <div class="message-avatar ai-avatar">
            <i class="fas fa-robot"></i>
          </div>
          <div class="message-content">
            <div class="message-bubble">
              <h3>ðŸ¤– Welcome to DerQCV AI Assistant!</h3>
              <p>Hello! I'm DerQCV AI Assistant, powered by DeepSeek. I'm here to help you with all your questions about cryptography, quantum computing, and how to use this platform.</p>
              
              <h4>What I can help you with:</h4>
              <ul>
                <li><strong>Cryptography concepts:</strong> RSA, AES, symmetric/asymmetric encryption</li>
                <li><strong>Quantum computing:</strong> BB84 protocol, quantum key distribution</li>
                <li><strong>Code examples:</strong> Python, JavaScript, Java, C++ implementations</li>
                <li><strong>Mathematical explanations:</strong> Step-by-step algorithm breakdowns</li>
                <li><strong>Platform guidance:</strong> Navigate through different modes</li>
              </ul>
              
              <div class="security-warning">
                <div class="security-warning-title">
                  <i class="fas fa-shield-alt"></i>
                  Security Note
                </div>
                <p>Remember that any code examples provided are for educational purposes. Always use proper security practices in production environments.</p>
              </div>
              
              <p>What would you like to explore today? ðŸš€</p>
            </div>
            <div class="message-actions">
              <button class="message-action-btn" onclick="copyMessage(this)">
                <i class="fas fa-copy"></i> Copy
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <div class="typing-indicator" id="typingIndicator" style="display: none;">
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
        <span style="margin-left: 10px; color: var(--ai-color); font-size: 0.9rem;">AI is thinking...</span>
      </div>
      
      <div class="chat-input-container">
        <textarea 
          id="chatInput" 
          class="chat-input" 
          placeholder="Ask me anything about cryptography, quantum computing, or request code examples..." 
          rows="1"
        ></textarea>
        <button id="sendButton" class="send-button">
          <i class="fas fa-paper-plane"></i>
        </button>
      </div>
    </div>
  </div>
  
  <div class="project-info">
    <h3><i class="fas fa-info-circle"></i> About Derouiche Quantum Crypto Visualizer</h3>
    <p>
      Derouiche Quantum Crypto Visualizer is an educational platform designed to make complex cryptography and quantum computing concepts accessible through interactive visualizations and simulations. Our platform offers multiple modes to explore different aspects of cryptography.
    </p>
    
  </div>
</main>
<footer>
  <div class="footer-content">

    <p>&copy; 2025 Derouiche Quantum Crypto Visualizer â€“ All rights reserved</p>
  </div>
</footer>
<div class="notification" id="notification"></div>

<script>
  // DOM Elements
  const chatContainer = document.getElementById('chatContainer');
  const chatMessages = document.getElementById('chatMessages');
  const chatInput = document.getElementById('chatInput');
  const sendButton = document.getElementById('sendButton');
  const typingIndicator = document.getElementById('typingIndicator');
  const suggestedQuestions = document.querySelectorAll('.suggested-questions li');
  const notification = document.getElementById('notification');
  const expandBtn = document.getElementById('expandBtn');
  const fullscreenBtn = document.getElementById('fullscreenBtn');
  const clearBtn = document.getElementById('clearBtn');
  
  // API Configuration
  const API_KEY = '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'; // Replace with your actual API key
  const API_URL = 'https://openrouter.ai/api/v1/chat/completions';
  
  // Chat state
  let conversationHistory = [];
  let isExpanded = false;
  let isFullscreen = false;
  
  // Event Listeners
  sendButton.addEventListener('click', sendMessage);
  chatInput.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      sendMessage();
    }
  });
  
  // Auto-resize textarea
  chatInput.addEventListener('input', function() {
    this.style.height = 'auto';
    this.style.height = Math.min(this.scrollHeight, 120) + 'px';
  });
  
  // Chat controls
  expandBtn.addEventListener('click', toggleExpand);
  fullscreenBtn.addEventListener('click', toggleFullscreen);
  clearBtn.addEventListener('click', clearChat);
  
  // Suggested questions
  suggestedQuestions.forEach(question => {
    question.addEventListener('click', function() {
      // Remove active class from all questions
      suggestedQuestions.forEach(q => q.classList.remove('active'));
      
      // Add active class to clicked question
      this.classList.add('active');
      
      // Set the question as input
      chatInput.value = this.textContent;
      
      // Send the message
      sendMessage();
    });
  });
  
  // Toggle expand
  function toggleExpand() {
    isExpanded = !isExpanded;
    chatContainer.classList.toggle('expanded', isExpanded);
    expandBtn.classList.toggle('active', isExpanded);
    expandBtn.querySelector('i').className = isExpanded ? 'fas fa-compress-arrows-alt' : 'fas fa-expand-arrows-alt';
    expandBtn.title = isExpanded ? 'Compress Chat' : 'Expand Chat';
    showNotification(isExpanded ? 'Chat expanded' : 'Chat compressed', false);
  }
  
  // Toggle fullscreen
  function toggleFullscreen() {
    isFullscreen = !isFullscreen;
    chatContainer.classList.toggle('fullscreen', isFullscreen);
    fullscreenBtn.classList.toggle('active', isFullscreen);
    fullscreenBtn.querySelector('i').className = isFullscreen ? 'fas fa-compress' : 'fas fa-expand';
    fullscreenBtn.title = isFullscreen ? 'Exit Fullscreen' : 'Fullscreen Mode';
    
    // Handle ESC key for fullscreen exit
    if (isFullscreen) {
      document.addEventListener('keydown', handleEscKey);
    } else {
      document.removeEventListener('keydown', handleEscKey);
    }
    
    showNotification(isFullscreen ? 'Entered fullscreen mode' : 'Exited fullscreen mode', false);
  }
  
  // Handle ESC key
  function handleEscKey(e) {
    if (e.key === 'Escape' && isFullscreen) {
      toggleFullscreen();
    }
  }
  
  // Clear chat
  function clearChat() {
    if (confirm('Are you sure you want to clear the chat history?')) {
      // Keep only the welcome message
      const welcomeMessage = chatMessages.querySelector('.message.ai-message');
      chatMessages.innerHTML = '';
      chatMessages.appendChild(welcomeMessage);
      
      // Clear conversation history
      conversationHistory = [];
      
      // Remove active state from suggested questions
      suggestedQuestions.forEach(q => q.classList.remove('active'));
      
      showNotification('Chat cleared successfully', false);
    }
  }
  
  // Function to send a message
  function sendMessage() {
    const message = chatInput.value.trim();
    if (!message) return;
    
    // Add user message to chat
    addMessage(message, 'user');
    
    // Clear input
    chatInput.value = '';
    chatInput.style.height = 'auto';
    
    // Disable send button
    sendButton.disabled = true;
    
    // Show typing indicator
    typingIndicator.style.display = 'flex';
    
    // Scroll to bottom
    scrollToBottom();
    
    // Get AI response
    getAIResponse(message);
  }
  
  // Function to add a message to the chat
  function addMessage(text, sender) {
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${sender}-message`;
    
    const avatarDiv = document.createElement('div');
    avatarDiv.className = `message-avatar ${sender}-avatar`;
    avatarDiv.innerHTML = sender === 'user' ? '<i class="fas fa-user"></i>' : '<i class="fas fa-robot"></i>';
    
    const contentDiv = document.createElement('div');
    contentDiv.className = 'message-content';
    
    const bubbleDiv = document.createElement('div');
    bubbleDiv.className = 'message-bubble';
    
    // Process text for markdown and special formatting
    if (sender === 'ai') {
      // Process the AI response with enhanced formatting
      text = processAIResponse(text);
      bubbleDiv.innerHTML = text;
    } else {
      bubbleDiv.textContent = text;
    }
    
    const timeDiv = document.createElement('div');
    timeDiv.className = 'message-time';
    timeDiv.textContent = getCurrentTime();
    
    const actionsDiv = document.createElement('div');
    actionsDiv.className = 'message-actions';
    
    if (sender === 'ai') {
      actionsDiv.innerHTML = `
        <button class="message-action-btn" onclick="copyMessage(this)">
          <i class="fas fa-copy"></i> Copy
        </button>
        <button class="message-action-btn" onclick="regenerateResponse(this)">
          <i class="fas fa-redo"></i> Regenerate
        </button>
      `;
    } else {
      actionsDiv.innerHTML = `
        <button class="message-action-btn" onclick="copyMessage(this)">
          <i class="fas fa-copy"></i> Copy
        </button>
        <button class="message-action-btn" onclick="editMessage(this)">
          <i class="fas fa-edit"></i> Edit
        </button>
      `;
    }
    
    contentDiv.appendChild(bubbleDiv);
    contentDiv.appendChild(timeDiv);
    contentDiv.appendChild(actionsDiv);
    
    messageDiv.appendChild(avatarDiv);
    messageDiv.appendChild(contentDiv);
    
    chatMessages.appendChild(messageDiv);
    
    // Add to conversation history (limit to last 10 messages to avoid token limits)
    conversationHistory.push({
      role: sender === 'user' ? 'user' : 'assistant',
      content: text.replace(/<[^>]*>/g, '') // Remove HTML tags for API
    });
    
    if (conversationHistory.length > 10) {
      conversationHistory = conversationHistory.slice(-10);
    }
    
    scrollToBottom();
    
    // Apply syntax highlighting to code blocks
    if (sender === 'ai') {
      setTimeout(() => {
        Prism.highlightAllUnder(messageDiv);
      }, 100);
    }
  }
  
  // Enhanced AI response processing
  function processAIResponse(text) {
    // Process markdown-like formatting
    text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
    text = text.replace(/\*(.*?)\*/g, '<em>$1</em>');
    text = text.replace(/`([^`]+)`/g, '<code style="background: rgba(100, 255, 218, 0.2); padding: 2px 6px; border-radius: 4px; font-family: monospace;">$1</code>');
    
    // Process headers
    text = text.replace(/^### (.*$)/gm, '<h4>$1</h4>');
    text = text.replace(/^## (.*$)/gm, '<h3>$1</h3>');
    
    // Process lists
    text = text.replace(/^- (.*$)/gm, '<li>$1</li>');
    text = text.replace(/(<li>.*<\/li>)/s, '<ul>$1</ul>');
    
    // Process numbered lists
    text = text.replace(/^\d+\. (.*$)/gm, '<li>$1</li>');
    
    // Process code blocks
    text = processCodeBlocks(text);
    
    // Process algorithm explanations
    text = processAlgorithmExplanations(text);
    
    // Process mathematical formulas
    text = processMathFormulas(text);
    
    // Process security warnings
    text = processSecurityWarnings(text);
    
    // Convert newlines to <br> for remaining text
    text = text.replace(/\n/g, '<br>');
    
    return text;
  }
  
  // Process algorithm explanations
  function processAlgorithmExplanations(text) {
    // Look for algorithm patterns
    const algorithmPattern = /ALGORITHM:\s*(.*?)\n((?:STEP\s*\d+:.*?\n)*)/gi;
    
    return text.replace(algorithmPattern, (match, title, steps) => {
      const stepsHtml = steps.replace(/STEP\s*(\d+):\s*(.*?)(?=\n|$)/gi, 
        '<div class="algorithm-step"><span class="step-number">$1</span>$2</div>');
      
      return `
        <div class="algorithm-explanation">
          <div class="algorithm-title">
            <i class="fas fa-cogs"></i>
            ${title}
          </div>
          <div class="algorithm-steps">
            ${stepsHtml}
          </div>
        </div>
      `;
    });
  }
  
  // Process mathematical formulas
  function processMathFormulas(text) {
    // Look for mathematical expressions wrapped in $
    return text.replace(/\$\$(.*?)\$\$/g, '<div class="math-formula">$1</div>');
  }
  
  // Process security warnings
  function processSecurityWarnings(text) {
    // Look for security warning patterns
    return text.replace(/(?:SECURITY|WARNING|IMPORTANT):\s*(.*?)(?=\n\n|\n[A-Z]|$)/gi, 
      '<div class="security-warning"><div class="security-warning-title"><i class="fas fa-exclamation-triangle"></i> Security Warning</div><p>$1</p></div>');
  }
  
  // Enhanced code block processing
  function processCodeBlocks(text) {
    const codeBlockRegex = /```(\w+)?\n?([\s\S]*?)```/g;
    
    return text.replace(codeBlockRegex, (match, language, code) => {
      const lang = language || 'text';
      const id = 'code-' + Math.random().toString(36).substr(2, 9);
      
      // Detect complexity information
      const complexityMatch = code.match(/(?:Time Complexity|Space Complexity):\s*O\([^)]+\)/gi);
      let complexityInfo = '';
      
      if (complexityMatch) {
        complexityInfo = `
          <div class="complexity-info">
            <div class="complexity-title">Complexity Analysis</div>
            ${complexityMatch.map(c => `<div>${c}</div>`).join('')}
          </div>
        `;
      }
      
      return `
        <div class="code-block-container">
          <div class="code-header">
            <div class="code-language">${lang}</div>
            <div class="code-actions">
              <button class="copy-button" onclick="copyCode('${id}')">
                <i class="fas fa-copy"></i> Copy
              </button>
              ${lang === 'python' || lang === 'javascript' ? `
                <button class="run-button" onclick="runCode('${id}', '${lang}')">
                  <i class="fas fa-play"></i> Run
                </button>
              ` : ''}
            </div>
          </div>
          <pre><code id="${id}" class="language-${lang}">${escapeHtml(code.trim())}</code></pre>
          ${complexityInfo}
        </div>
      `;
    });
  }
  
  // Function to escape HTML
  function escapeHtml(text) {
    const map = {
      '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      "'": '&#039;'
    };
    return text.replace(/[&<>"']/g, m => map[m]);
  }
  
  // Function to copy code to clipboard
  function copyCode(id) {
    const codeElement = document.getElementById(id);
    const text = codeElement.textContent;
    
    navigator.clipboard.writeText(text).then(() => {
      const button = codeElement.parentElement.previousElementSibling.querySelector('.copy-button');
      const originalHTML = button.innerHTML;
      
      button.innerHTML = '<i class="fas fa-check"></i> Copied!';
      button.classList.add('copied');
      
      setTimeout(() => {
        button.innerHTML = originalHTML;
        button.classList.remove('copied');
      }, 2000);
      
      showNotification('Code copied to clipboard!', false);
    }).catch(err => {
      console.error('Failed to copy: ', err);
      showNotification('Failed to copy code', true);
    });
  }
  
  // Function to run code (simulated)
  function runCode(id, language) {
    const codeElement = document.getElementById(id);
    const code = codeElement.textContent;
    const container = codeElement.closest('.code-block-container');
    
    // Remove existing output
    const existingOutput = container.querySelector('.code-output');
    if (existingOutput) {
      existingOutput.remove();
    }
    
    // Create output div
    const outputDiv = document.createElement('div');
    outputDiv.className = 'code-output';
    
    // Simulate code execution
    setTimeout(() => {
      if (language === 'python') {
        outputDiv.innerHTML = `
          <div style="color: #00ff00;">âœ“ Code executed successfully</div>
          <div style="color: #ffaa00;">âš  This is a simulated output for demonstration</div>
          <div style="color: #888;">For actual execution, copy the code to a Python environment</div>
        `;
      } else if (language === 'javascript') {
        outputDiv.innerHTML = `
          <div style="color: #00ff00;">âœ“ JavaScript code validated</div>
          <div style="color: #ffaa00;">âš  This is a simulated output for demonstration</div>
          <div style="color: #888;">For actual execution, copy the code to a JavaScript environment</div>
        `;
      }
      
      container.appendChild(outputDiv);
      showNotification(`${language} code simulated successfully!`, false);
    }, 1000);
    
    // Show loading
    outputDiv.innerHTML = `
      <div style="color: #ffaa00;">
        <i class="fas fa-spinner fa-spin"></i> Running ${language} code...
      </div>
    `;
    container.appendChild(outputDiv);
  }
  
  // Copy message function
  function copyMessage(button) {
    const messageContent = button.closest('.message-content').querySelector('.message-bubble');
    const text = messageContent.textContent || messageContent.innerText;
    
    navigator.clipboard.writeText(text).then(() => {
      const originalHTML = button.innerHTML;
      button.innerHTML = '<i class="fas fa-check"></i> Copied!';
      
      setTimeout(() => {
        button.innerHTML = originalHTML;
      }, 2000);
      
      showNotification('Message copied to clipboard!', false);
    }).catch(err => {
      showNotification('Failed to copy message', true);
    });
  }
  
  // Regenerate response function
  function regenerateResponse(button) {
    const messageElement = button.closest('.message');
    const previousUserMessage = messageElement.previousElementSibling;
    
    if (previousUserMessage && previousUserMessage.classList.contains('user-message')) {
      const userText = previousUserMessage.querySelector('.message-bubble').textContent;
      
      // Remove the AI message
      messageElement.remove();
      
      // Show typing indicator
      typingIndicator.style.display = 'flex';
      scrollToBottom();
      
      // Regenerate response
      getAIResponse(userText);
    }
  }
  
  // Edit message function
  function editMessage(button) {
    const messageElement = button.closest('.message');
    const bubbleElement = messageElement.querySelector('.message-bubble');
    const currentText = bubbleElement.textContent;
    
    // Create input field
    const input = document.createElement('textarea');
    input.value = currentText;
    input.className = 'chat-input';
    input.style.width = '100%';
    input.style.minHeight = '50px';
    
    // Replace bubble with input
    bubbleElement.replaceWith(input);
    input.focus();
    
    // Handle save
    const saveEdit = () => {
      const newText = input.value.trim();
      if (newText && newText !== currentText) {
        const newBubble = document.createElement('div');
        newBubble.className = 'message-bubble';
        newBubble.textContent = newText;
        input.replaceWith(newBubble);
        
        // Remove all messages after this one
        let nextMessage = messageElement.nextElementSibling;
        while (nextMessage) {
          const toRemove = nextMessage;
          nextMessage = nextMessage.nextElementSibling;
          toRemove.remove();
        }
        
        // Send new message
        getAIResponse(newText);
      } else {
        // Cancel edit
        const newBubble = document.createElement('div');
        newBubble.className = 'message-bubble';
        newBubble.textContent = currentText;
        input.replaceWith(newBubble);
      }
    };
    
    // Handle enter key
    input.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        saveEdit();
      } else if (e.key === 'Escape') {
        // Cancel edit
        const newBubble = document.createElement('div');
        newBubble.className = 'message-bubble';
        newBubble.textContent = currentText;
        input.replaceWith(newBubble);
      }
    });
    
    // Handle blur
    input.addEventListener('blur', saveEdit);
  }
  
  // Function to get current time
  function getCurrentTime() {
    const now = new Date();
    return now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
  }
  
  // Function to scroll to bottom of chat
  function scrollToBottom() {
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }
  
  // Function to get AI response via API
  async function getAIResponse(message) {
    try {
      const systemPrompt = `You are DerQCV AI Assistant, an expert in cryptography and quantum computing. 

RESPONSE FORMAT GUIDELINES:
- Use clear headings with ### for main topics and #### for subtopics
- When providing code examples, always use proper markdown code blocks with language specification
- For algorithms, use this format:
  ALGORITHM: [Algorithm Name]
  STEP 1: [Description]
  STEP 2: [Description]
  etc.
- Include complexity analysis when relevant: Time Complexity: O(n), Space Complexity: O(1)
- Use SECURITY: prefix for important security notes
- Structure responses with clear sections
- Use bullet points for lists with - prefix
- Highlight important terms with **bold** formatting
- Use mathematical notation with $ for formulas when needed

Always provide educational, well-structured responses with practical examples.`;
      
      const apiMessages = [
        { role: "system", content: systemPrompt },
        ...conversationHistory,
        { role: "user", content: message }
      ];
      
      const response = await fetch(API_URL, {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${API_KEY}`,
          "HTTP-Referer": "https://cryptosecure.example.com",
          "X-Title": "CryptoSecure - Quantum Crypto Visualizer",
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          "model": "deepseek/deepseek-r1:free",
          "messages": apiMessages,
          "temperature": 0.7,
          "max_tokens": 2000
        })
      });
      
      if (!response.ok) {
        const errorData = await response.json();
        throw new Error(`API Error: ${response.status} - ${errorData.error?.message || 'Unknown error'}`);
      }
      
      const data = await response.json();
      const aiResponse = data.choices[0].message.content;
      
      typingIndicator.style.display = 'none';
      addMessage(aiResponse, 'ai');
      sendButton.disabled = false;
      
    } catch (error) {
      console.error('Error getting AI response:', error);
      typingIndicator.style.display = 'none';
      showNotification(`Error: ${error.message}`, true);
      
      // Add error message
      const errorResponse = `I'm sorry, I encountered an error while processing your request. This might be due to:

### Possible Issues:
- **API Connection**: Network connectivity problems
- **Rate Limiting**: Too many requests in a short time
- **Service Unavailable**: The AI service might be temporarily unavailable

### What you can do:
1. **Try again** in a few moments
2. **Check your connection** and refresh the page
3. **Simplify your question** if it was very complex

I apologize for the inconvenience! ðŸ¤–`;
      
      addMessage(errorResponse, 'ai');
      sendButton.disabled = false;
    }
  }
  
  // Function to show notification
  function showNotification(message, isError = false) {
    notification.textContent = message;
    notification.className = 'notification' + (isError ? ' error' : ' success');
    notification.classList.add('show');
    
    setTimeout(() => {
      notification.classList.remove('show');
    }, 3000);
  }
  
  // Initialize animations
  document.addEventListener('DOMContentLoaded', () => {
    // Animate elements on page load
    gsap.from('.ai-intro', { duration: 0.8, y: 30, opacity: 0, ease: 'power2.out' });
    gsap.from('.ai-feature', { duration: 0.6, y: 30, opacity: 0, ease: 'power2.out', stagger: 0.1, delay: 0.2 });
    gsap.from('.chat-container', { duration: 0.8, y: 30, opacity: 0, ease: 'power2.out', delay: 0.4 });
    gsap.from('.project-info', { duration: 0.8, y: 30, opacity: 0, ease: 'power2.out', delay: 0.6 });
    
    // Add floating animation to logo icon
    gsap.to('.logo-icon', {
      y: -5,
      duration: 2,
      repeat: -1,
      yoyo: true,
      ease: 'power1.inOut'
    });
    
    // Initialize chat
    scrollToBottom();
  });
</script>
</body>

</html>










